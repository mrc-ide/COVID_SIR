script: script.R

parameters:
    short_run:
      default: false

packages:
  - tidyr
  - magrittr
  - ggplot2
  - tdigest
  - distr6
  - viridis
  - dplyr
  - spimalot
  - stringr
  - mcstate
  - patchwork

artefacts:
  - data:
      description: output data from filter
      filenames:
        - deterministic/fit.rds
        - deterministic/pars.rds
        - deterministic_adaptive/fit.rds
        - deterministic_adaptive/pars.rds
        - stochastic/fit.rds
        - stochastic/pars.rds
        - outputs/filter_samples.rds
        - outputs/filter_data.rds
        - figs/deterministic_traceplots.png
        - figs/deterministic_adaptive_traceplots.png
        - figs/stochastic_traceplots.png
        - data/true_history.rds

sources:
  - support.R

global_resources:
  global_util.R: rtm_inference/util_new.R

depends:
  - comparison_sir_fits: ## pull deterministic adaptive = FALSE
      id: latest(parameter:short_run == short_run && parameter:deterministic == TRUE && parameter:adaptive_proposal == FALSE)
      use:
        deterministic/fit.rds: outputs/fit.rds
        deterministic/pars.rds: outputs/pars.rds
        figs/deterministic_traceplots.png: figs/traceplots.png
  - comparison_sir_fits: ## pull deterministic adaptive = TRUE
      id: latest(parameter:short_run == short_run && parameter:deterministic == TRUE && parameter:adaptive_proposal == TRUE)
      use:
        deterministic_adaptive/fit.rds: outputs/fit.rds
        deterministic_adaptive/pars.rds: outputs/pars.rds
        figs/deterministic_adaptive_traceplots.png: figs/traceplots.png
  - comparison_sir_fits: ## pull stochastic
      id: latest(parameter:short_run == short_run && parameter:deterministic == FALSE && parameter:adaptive_proposal == FALSE)
      use:
        stochastic/fit.rds: outputs/fit.rds
        stochastic/pars.rds: outputs/pars.rds
        figs/stochastic_traceplots.png: figs/traceplots.png
        data/true_history.rds: data/true_history.rds
# Ignore these lines, they just need to exist
requester: Determinsitic vs Stochastic Paper
author: Yasin
